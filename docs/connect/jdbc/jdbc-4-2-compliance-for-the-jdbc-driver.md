---
description: JDBC 驱动程序的 JDBC 4.2 合规性
title: JDBC 驱动程序的 JDBC 4.2 合规性 | Microsoft Docs
ms.custom: ''
ms.date: 08/12/2019
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
ms.assetid: 36025ec0-3c72-4e68-8083-58b38e42d03b
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: b9d881391426b9ef76eae886d97456305d3bccbd
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/17/2020
ms.locfileid: "88438379"
---
# <a name="jdbc-42-compliance-for-the-jdbc-driver"></a>JDBC 驱动程序的 JDBC 4.2 合规性

[!INCLUDE[Driver_JDBC_Download](../../includes/driver_jdbc_download.md)]

> [!NOTE]  
> 早于 Microsoft JDBC Driver 4.2 for SQL Server 的版本兼容 Java Database Connectivity API 4.0 规范。 本部分不适用于 4.2 版本之前的版本。  
  
 Microsoft JDBC Driver 4.2 for SQL Server 支持 Java Database Connectivity API 4.2 规范，并带有以下 API 方法。  
  
## <a name="sqlserverstatement-class"></a>SQLServerStatement 类
  
|新方法|说明|值得注意的实现|  
|-----------------|-----------------|-------------------------------|  
|long[] executeLargeBatch()|执行批，其中返回的更新计数可以是 long 型。|按 java.sql.Statement 接口中所述实现。 有关详细信息，请参阅 [java.sql.Statement](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeLargeBatch--)。|  
|long executeLargeUpdate(String sql)<br /><br /> long executeLargeUpdate(String sql, int autoGeneratedKeys)<br /><br /> long executeLargeUpdate(String sql, int[] columnIndexes)<br /><br /> executeLargeUpdate(String sql, String[] columnNames)|执行 DML/DDL 语句，其中返回的更新计数可以是 long 型。 有 4 种新的（重载）方法来支持 long 型更新计数。|按 java.sql.Statement 接口中所述实现。 有关详细信息，请参阅 [java.sql.Statement](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeLargeBatch--)。|  
|long getLargeMaxRows()|检索最大行数作为 long 型值，ResultSet 可以包含该值。|SQL Server 仅支持最大行的 Integer 型限制。 有关详细信息，请参阅 [java.sql.Statement](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeLargeBatch--)。|  
|long getLargeUpdateCount()|检索当前结果作为 long 型更新计数。|SQL Server 仅支持最大行的 Integer 型限制。 有关详细信息，请参阅 [java.sql.Statement](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeLargeBatch--)。|  
|void setLargeMaxRows(long max)|将最大行数设置为 ResultSet 可以包含的 long 型值。|SQL Server 仅支持最大行的 Integer 型限制。 如果传递的参数大于最大 Integer 型大小，此方法将引发不受支持的异常。 有关详细信息，请参阅 [java.sql.Statement](https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#executeLargeBatch--)。|  
  
## <a name="sqlservercallablestatement-class"></a>SQLServerCallableStatement 类  
  
|新方法|说明|值得注意的实现|  
|-----------------|-----------------|-------------------------------|  
|void registerOutParameter(int parameterIndex, SQLType sqlType)<br /><br /> void registerOutParameter(int parameterIndex, SQLType sqlType, int scale)<br /><br /> void registerOutParameter(int parameterIndex, SQLType sqlType, String typeName)<br /><br /> void registerOutParameter(String parameterName, SQLType sqlType)<br /><br /> void registerOutParameter(String parameterName, SQLType sqlType, int scale)<br /><br /> registerOutParameter(String parameterName, SQLType sqlType, String typeName)|注册 OUT 参数。 有 6 种新的（重载）方法来支持新的 SQLType 接口。|按 java.sql.CallableStatement 接口中所述实现。 有关详细信息，请参阅 [java.sql.CallableStatement](https://docs.oracle.com/javase/8/docs/api/java/sql/CallableStatement.html)。|  
|void setObject(String parameterName, Object x, SQLType targetSqlType)<br /><br /> void setObject(String parameterName, Object x, SQLType targetSqlType, int scaleOrLength)|设置具有给定对象的参数值。 有 2 种新的（重载）方法来支持新的 SQLType 接口。|按 java.sql.CallableStatement 接口中所述实现。 有关详细信息，请参阅 [java.sql.CallableStatement](https://docs.oracle.com/javase/8/docs/api/java/sql/CallableStatement.html)。|  
  
## <a name="sqlserverpreparedstatement-class"></a>SQLServerPreparedStatement 类
  
|新方法|说明|值得注意的实现|  
|-----------------|-----------------|-------------------------------|  
|long executeLargeUpdate()|执行 DML/DDL 语句并返回 long 型更新计数|按 java.sql.PreparedStatement 接口中所述实现。 有关详细信息，请参阅 [java.sql.PreparedStatement](https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html)。|  
|void setObject(int parameterIndex, Object x, SQLType targetSqlType)<br /><br /> void setObject(int parameterIndex, Object x, SQLType targetSqlType, int scaleOrLength)|设置具有给定对象的参数值。 有 2 种新的（重载）方法可支持新的 SQLType 接口。|按 java.sql.PreparedStatement 接口中所述实现。 有关详细信息，请参阅 [java.sql.PreparedStatement](https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html)。|  
  
## <a name="sqlserverdatabasemetadata-class"></a>SQLServerDatabaseMetaData 类
  
|新方法|说明|值得注意的实现|  
|-----------------|-----------------|-------------------------------|  
|long getMaxLogicalLobSize()|检索此数据库在 LOB 的逻辑大小中允许的最大字节数。|对于 SQL Server，此值为 2^31-1。 有关详细信息，请参阅 [java.sql.DatabaseMetaData](https://docs.oracle.com/javase/8/docs/api/java/sql/DatabaseMetaData.html)。|  
|boolean supportsRefCursors()|检索此数据库是否支持 REF CURSOR。|当 SQL Server 不支持 REF CURSOR 时，返回 false。 有关详细信息，请参阅 [java.sql.DatabaseMetaData](https://docs.oracle.com/javase/8/docs/api/java/sql/DatabaseMetaData.html)。|  
  
## <a name="sqlserverresultset-class"></a>SQLServerResultSet 类
  
|新方法|说明|值得注意的实现|  
|-|-|-|  
||使用对象值更新指定列。 有 4 种新的（重载）方法来支持新的 SQLType 接口。|按 java.sql.ResultSet 接口中所述实现。 有关详细信息，请参阅 [java.sql.ResultSet](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html)。|  
  
 Microsoft JDBC Driver 4.2 for SQL Server 支持 Java Database Connectivity API 4.2 规范，并带有以下数据类型映射。  
  
|新的数据类型映射|说明|  
|-|-|  
|**Java 8 中新增的 Java 类：** <br /> <br /> LocalDate/LocalTime/LocalDateTime<br /><br /> OffsetTime/OffsetDateTime<br /><br /> **新的 JDBC 类型：**<br /><br /> TIME_WITH_TIMEZONE<br /><br /> TIMESTAMP_WITH_TIMEZONE<br /><br /> REF_CURSOR|REF_CURSOR 在 SQL Server 中不受支持。 如果使用此类型，驱动程序将引发 SQLFeatureNotSupportedException 异常。 该驱动程序支持 JDBC 4.2 规范中指定所有其他新的 Java 和 JDBC 类型映射。|  
